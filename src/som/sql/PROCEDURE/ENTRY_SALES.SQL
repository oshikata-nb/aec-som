CREATE OR REPLACE PROCEDURE ENTRY_SALES(LNG_FLG IN NUMBER,ITEM_CODE IN NVARCHAR2,QTY IN NUMBER,INOUTDATE IN DATE,LOCATION IN NVARCHAR2,LOT IN NVARCHAR2,REMARK IN NVARCHAR2,REASON IN NVARCHAR2,REASONCD IN NVARCHAR2,LNG_FUNC IN NUMBER,LNG_INOUT IN NUMBER,STR_ALOT IN NVARCHAR2,LNG_COST IN NUMBER,STR_LOGIN_USER IN NVARCHAR2,OUT_PARA OUT NVARCHAR2 ) IS
		PARA VARCHAR2(255) := '';
		INOUTDIV NUMBER := 0;
	BEGIN 
		--更新引数セット1-10
		PAK_ALLZAITABLE.LNG_OPNO :=17;
		PAK_ALLZAITABLE.LNG_INOUTKBN := LNG_INOUT;
		PAK_ALLZAITABLE.STR_ITEMCODE := ITEM_CODE;
		PAK_ALLZAITABLE.LNG_QTY := NVL(QTY,0);
		PAK_ALLZAITABLE.LNG_FAULTQTY := 0;
		PAK_ALLZAITABLE.DTE_INOUTDATE := InOutDate;
		PAK_ALLZAITABLE.STR_LOCATIONCODE := Location;
		PAK_ALLZAITABLE.LNG_COST := LNG_COST;
		PAK_ALLZAITABLE.DTE_UKEDATE := null;
		PAK_ALLZAITABLE.LNG_COSTFLG := null;
		--11-20
		PAK_ALLZAITABLE.LNG_CHKFLG := 1;
		PAK_ALLZAITABLE.LNG_CALCCOSTFLG := 1;
		PAK_ALLZAITABLE.LNG_INVENTORYQTY := null;
		PAK_ALLZAITABLE.LNG_INVENTORYCOST := null;
		PAK_ALLZAITABLE.STR_LOTCODE := LOT;
		PAK_ALLZAITABLE.DTE_START_DATE := null;
		PAK_ALLZAITABLE.DTE_ISSUE_DATE := null;
		PAK_ALLZAITABLE.DTE_END_DATE := null;
		PAK_ALLZAITABLE.LNG_INOUTDIVISION := LNG_INOUT;
		PAK_ALLZAITABLE.STR_ODERNO := STR_ALOT;
		--21-30
		PAK_ALLZAITABLE.LNG_ODERLINENO := 1;
		PAK_ALLZAITABLE.LNG_INOUTPRICE := LNG_COST;
		PAK_ALLZAITABLE.LNG_INOUTCOST := NVL(LNG_COST,0)*NVL(QTY,0);
		PAK_ALLZAITABLE.STR_REMARK := NULL;
		PAK_ALLZAITABLE.LNG_INOUTSOURCEDELFLG := 0;
		PAK_ALLZAITABLE.STR_INOUTSOURCENO := null;
		PAK_ALLZAITABLE.STR_SECTIONCD := null;
		PAK_ALLZAITABLE.STR_ACCOUNTCD := null;
		PAK_ALLZAITABLE.STR_SUBACCOUNTCD := null;
		PAK_ALLZAITABLE.STR_ITEMCATEGORY := null;
		--31-40
		PAK_ALLZAITABLE.STR_PARENTITEMCD := null;
		PAK_ALLZAITABLE.STR_PARENTACCOUNTCD := null;
		PAK_ALLZAITABLE.STR_PARENTSUBACCOUNTCD := null;
		PAK_ALLZAITABLE.STR_PARENTITEMCATEGORY := null;
		PAK_ALLZAITABLE.STR_REASON := REASON;
		--	PAK_ALLZAITABLE.DTE_INOUTUPDATEDATE := null;
		--	PAK_ALLZAITABLE.DTE_INVENTORYUPDATEDATE := null;
		PAK_ALLZAITABLE.LNG_LOTTRACEDELFLG := 0;
		PAK_ALLZAITABLE.LNG_FUNCDIVISION :=LNG_FUNC;
		PAK_ALLZAITABLE.STR_SLIPNO := null;
		--41-46
		PAK_ALLZAITABLE.LNG_SLIPLINENO := null;
		PAK_ALLZAITABLE.LNG_ORDERDIVISION := null;
		PAK_ALLZAITABLE.STR_ORDERNO := null;
		PAK_ALLZAITABLE.LNG_LASTINDIVISION := null;
		PAK_ALLZAITABLE.STR_LASTINNO := null;
		PAK_ALLZAITABLE.STR_INPUTNO := STR_LOGIN_USER;
		PAK_ALLZAITABLE.STR_HANPA_ITEMCODE := null;
		PAK_ALLZAITABLE.LNG_HANPAQTY :=null;
		PAK_ALLZAITABLE.STR_ALIAS_LOT := NULL;
		PAK_ALLZAITABLE.DTE_LOTMAKEDATE := SYSDATE;
		PAK_ALLZAITABLE.LNG_AZUDIV := 0;
		PAK_ALLZAITABLE.STR_RYCD := REASONCD;
		
		PAK_ALLZAITABLE.UPDATE_ZAI(PARA);
		IF PARA = 'COMPLETE' THEN
			NULL;
		ELSE
			OUT_PARA := '移動元' || PARA;
			GOTO P_END;
		END IF;
		PAK_ALLZAITABLE.STR_LOCATIONCODE := REMARK;
		IF LNG_INOUT = 0 THEN
			PAK_ALLZAITABLE.LNG_INOUTKBN := 1;
			PAK_ALLZAITABLE.LNG_INOUTDIVISION := 1;
		ELSE
			PAK_ALLZAITABLE.LNG_INOUTDIVISION := 0;
			PAK_ALLZAITABLE.LNG_INOUTKBN := 0;
		END IF;			
		PAK_ALLZAITABLE.UPDATE_ZAI(PARA);
		IF PARA = 'COMPLETE' THEN
			OUT_PARA := PARA;
		ELSE
			OUT_PARA := '移動先' || PARA;
			GOTO P_END;
		END IF;
<<P_END>>
		NULL;
	EXCEPTION
		when others then
			dbms_output.put_line('ENTRY_SALES ' || sqlcode || sqlerrm);
		OUT_PARA := 'ENTRY_SALES ' || sqlcode || sqlerrm;
		
    	END;
/
